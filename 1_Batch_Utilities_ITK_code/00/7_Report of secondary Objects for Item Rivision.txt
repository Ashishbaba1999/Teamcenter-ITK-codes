#include<tc/emh.h>
#include<tccore/item.h>
#include<sa/user.h>
#include<tc/folder.h>
#include<tccore/aom.h>
#include<stdlib.h>
#include<ae/dataset.h>
#include<ae/datasettype.h>
#include<tccore/grm.h>
#include<tccore/workspaceobject.h>

int Report_Error(int iFail)
{
	char* cError = NULL;
	if (iFail != ITK_ok)
	{
		EMH_ask_error_text(iFail, &cError);
		printf("\n\n Error is : %s", cError);
		MEM_free(cError);
		exit(0);
	}
}




...........................................................

#include "Header.h"

int ITK_user_main(int argc, char* argv[])
{
	int iFail = 0;
	int iSecObjCount = 0;
	int i = 0;
	char* cError = NULL;
	char* cUserID = NULL;
	char* cPassword = NULL;
	char* cGroup = NULL;
	char* cItemID = NULL;
	char* cItemName = NULL;
	char** cSecObjName = NULL;
	tag_t tItem = NULLTAG;
	tag_t tRev = NULLTAG;
	tag_t tdatasettype = NULLTAG;
	tag_t tDataset = NULLTAG;
	tag_t tRelationType = NULLTAG;
	tag_t tRelation = NULLTAG;
	tag_t* tSecObject = NULLTAG;


	if (argc == 5)
	{
		cUserID = ITK_ask_cli_argument("-u=");
		cPassword = ITK_ask_cli_argument("-p=");
		cGroup = ITK_ask_cli_argument("-g=");
		cItemID = ITK_ask_cli_argument("-item_id=");
		

		Report_Error(iFail = ITK_init_module(cUserID, cPassword, cGroup));
		printf("\n\n login success");

		Report_Error(iFail = ITEM_find_rev(cItemID,"A",&tRev));
		printf("\n\n Item Revision Found Success");
		
		Report_Error(iFail = GRM_find_relation_type("IMAN_specification", &tRelationType));
		printf("\n\n Relation find success");
		
		Report_Error(iFail = GRM_list_secondary_objects_only(tRev, tRelationType, &iSecObjCount,&tSecObject));
		printf("\n\n Secondary Objects List success");

		for (i = 0; i < iSecObjCount; i++) {
			Report_Error(iFail = WSOM_ask_name2(tSecObject[i],&cSecObjName));
			printf("\n\n  Dataset Name is %s " , cSecObjName);

		}

		Report_Error(iFail = ITK_exit_module(TRUE));
		printf("\n\n logout success");
	}
	else
	{
		printf("\n\n Argument count is less or more");
	}
	if (tSecObject) {
		MEM_free(tSecObject);
	}
	return 0;
}